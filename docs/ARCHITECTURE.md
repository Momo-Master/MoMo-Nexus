# ğŸ—ï¸ MoMo-Nexus Architecture

> **Version:** 1.1.0 | **Last Updated:** 2025-12-20

---

## ğŸ“‹ Overview

MoMo-Nexus is the central communication hub for the MoMo ecosystem. This document describes the technical architecture.

---

## ğŸ¯ Design Goals

| Goal | Priority | Description |
|------|----------|-------------|
| **Reliability** | P0 | Never lose messages |
| **Flexibility** | P0 | Support multiple channels |
| **Intelligence** | P1 | Smart routing decisions |
| **Simplicity** | P1 | Easy to deploy and manage |
| **Scalability** | P2 | Handle many devices |

---

## ğŸ”§ System Architecture

### High-Level Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           NEXUS SYSTEM                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   FIELD DEVICES                              NEXUS HUB                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•                              â•â•â•â•â•â•â•â•                       â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  MoMo   â”‚ â”€â”€â”€â”                     â”‚                                 â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚                  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚    CHANNEL LAYER          â”‚  â”‚  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”œâ”€â”€â”€â–ºâ”‚  LoRa   â”‚â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”‚                           â”‚  â”‚  â”‚
â”‚   â”‚ Ghost   â”‚ â”€â”€â”€â”¤    â”‚ Mesh    â”‚      â”‚  â”‚  LoRa â”‚ 4G â”‚ WiFi â”‚ BLE  â”‚  â”‚  â”‚
â”‚   â”‚ Bridge  â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚                           â”‚  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚                  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚              â”‚                  â”‚  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”œâ”€â”€â”€â–ºâ”‚  WiFi   â”‚â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚  â”‚
â”‚   â”‚  Mimic  â”‚ â”€â”€â”€â”¤    â”‚         â”‚      â”‚              â”‚                  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚                  â”‚                     â”‚  â”‚    ROUTING ENGINE         â”‚  â”‚  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚                           â”‚  â”‚  â”‚
â”‚   â”‚  Swarm  â”‚ â”€â”€â”€â”´â”€â”€â”€â–ºâ”‚   4G    â”‚â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”‚  Queue â”‚ Priority â”‚ ACK  â”‚  â”‚  â”‚
â”‚   â”‚  Nodes  â”‚         â”‚ Internetâ”‚      â”‚  â”‚                           â”‚  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚                                        â”‚              â”‚                  â”‚  â”‚
â”‚                                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚                                        â”‚  â”‚   APPLICATION LAYER       â”‚  â”‚  â”‚
â”‚                                        â”‚  â”‚                           â”‚  â”‚  â”‚
â”‚                                        â”‚  â”‚  Fleet â”‚ Alerts â”‚ Cmds   â”‚  â”‚  â”‚
â”‚                                        â”‚  â”‚                           â”‚  â”‚  â”‚
â”‚                                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚                                        â”‚              â”‚                  â”‚  â”‚
â”‚                                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚                                        â”‚  â”‚   PRESENTATION LAYER      â”‚  â”‚  â”‚
â”‚                                        â”‚  â”‚                           â”‚  â”‚  â”‚
â”‚   OPERATOR                             â”‚  â”‚  Web UI â”‚ API â”‚ Mobile   â”‚  â”‚  â”‚
â”‚   â•â•â•â•â•â•â•â•                             â”‚  â”‚                           â”‚  â”‚  â”‚
â”‚                                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚                                 â”‚  â”‚
â”‚   â”‚  ğŸ“±     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Web    â”‚â—„â”€â”€â”€â”€â”€â”¤                                 â”‚  â”‚
â”‚   â”‚ Mobile  â”‚         â”‚Dashboardâ”‚      â”‚                                 â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¡ Channel Layer

### Channel Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           CHANNEL LAYER                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                     ABSTRACT CHANNEL                                â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   interface Channel:                                               â”‚   â”‚
â”‚   â”‚     - name: str                                                    â”‚   â”‚
â”‚   â”‚     - status: ChannelStatus                                        â”‚   â”‚
â”‚   â”‚     - send(message) â†’ bool                                        â”‚   â”‚
â”‚   â”‚     - receive() â†’ Message                                         â”‚   â”‚
â”‚   â”‚     - get_latency() â†’ ms                                          â”‚   â”‚
â”‚   â”‚     - get_bandwidth() â†’ kbps                                      â”‚   â”‚
â”‚   â”‚     - health_check() â†’ bool                                       â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                        â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚          â”‚                         â”‚                         â”‚              â”‚
â”‚          â–¼                         â–¼                         â–¼              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚ LoRaChannel â”‚          â”‚ CellChannel â”‚          â”‚ WiFiChannel â”‚        â”‚
â”‚   â”‚             â”‚          â”‚             â”‚          â”‚             â”‚        â”‚
â”‚   â”‚ â€¢ Meshtasticâ”‚          â”‚ â€¢ SIM7600   â”‚          â”‚ â€¢ Client    â”‚        â”‚
â”‚   â”‚ â€¢ Serial    â”‚          â”‚ â€¢ AT cmds   â”‚          â”‚ â€¢ AP mode   â”‚        â”‚
â”‚   â”‚ â€¢ Long rangeâ”‚          â”‚ â€¢ PPP       â”‚          â”‚ â€¢ Local net â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚          â”‚                         â”‚                         â”‚              â”‚
â”‚          â–¼                         â–¼                         â–¼              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚ BLEChannel  â”‚          â”‚ SatChannel  â”‚          â”‚ MeshChannel â”‚        â”‚
â”‚   â”‚             â”‚          â”‚             â”‚          â”‚             â”‚        â”‚
â”‚   â”‚ â€¢ GATT      â”‚          â”‚ â€¢ Iridium   â”‚          â”‚ â€¢ WiFi Mesh â”‚        â”‚
â”‚   â”‚ â€¢ Short rng â”‚          â”‚ â€¢ SBD       â”‚          â”‚ â€¢ batman-advâ”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Channel Properties

| Channel | Latency | Bandwidth | Range | Cost | Reliability |
|---------|---------|-----------|-------|------|-------------|
| **LoRa** | 2-5s | 0.3 kbps | 15 km | Free | High |
| **4G/LTE** | 50ms | 10 Mbps | Global | $$ | Medium |
| **WiFi** | 10ms | 100 Mbps | 100m | Free | Medium |
| **BLE** | 20ms | 1 Mbps | 30m | Free | High |
| **Satellite** | 30s | 2 kbps | Global | $$$ | High |

---

## ğŸ”„ Routing Engine

### Routing Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ROUTING ENGINE                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   INBOUND MESSAGE                                                           â”‚
â”‚        â”‚                                                                     â”‚
â”‚        â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚   Parser    â”‚â”€â”€â”€â”€â–ºâ”‚  Validator  â”‚â”€â”€â”€â”€â–ºâ”‚   Router    â”‚                  â”‚
â”‚   â”‚             â”‚     â”‚             â”‚     â”‚             â”‚                  â”‚
â”‚   â”‚ â€¢ Decode    â”‚     â”‚ â€¢ Auth      â”‚     â”‚ â€¢ Dest      â”‚                  â”‚
â”‚   â”‚ â€¢ Validate  â”‚     â”‚ â€¢ Replay    â”‚     â”‚ â€¢ Priority  â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                   â”‚                         â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                              â”‚                    â”‚                    â”‚    â”‚
â”‚                              â–¼                    â–¼                    â–¼    â”‚
â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                       â”‚  To Fleet   â”‚     â”‚  To Queue   â”‚    â”‚ To App   â”‚  â”‚
â”‚                       â”‚  (devices)  â”‚     â”‚  (store)    â”‚    â”‚ (alert)  â”‚  â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚   OUTBOUND MESSAGE                                                          â”‚
â”‚        â”‚                                                                     â”‚
â”‚        â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚  Priority   â”‚â”€â”€â”€â”€â–ºâ”‚  Channel    â”‚â”€â”€â”€â”€â–ºâ”‚   Sender    â”‚                  â”‚
â”‚   â”‚  Classifier â”‚     â”‚  Selector   â”‚     â”‚             â”‚                  â”‚
â”‚   â”‚             â”‚     â”‚             â”‚     â”‚ â€¢ Serialize â”‚                  â”‚
â”‚   â”‚ â€¢ Critical  â”‚     â”‚ â€¢ Score     â”‚     â”‚ â€¢ Transmit  â”‚                  â”‚
â”‚   â”‚ â€¢ High      â”‚     â”‚ â€¢ Failover  â”‚     â”‚ â€¢ ACK wait  â”‚                  â”‚
â”‚   â”‚ â€¢ Normal    â”‚     â”‚ â€¢ Load bal  â”‚     â”‚             â”‚                  â”‚
â”‚   â”‚ â€¢ Low       â”‚     â”‚             â”‚     â”‚             â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                              â”‚                                              â”‚
â”‚                              â–¼                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    CHANNEL SELECTION ALGORITHM                      â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚   score(channel) = w1*availability + w2*latency + w3*cost          â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚   Weights by priority:                                             â”‚  â”‚
â”‚   â”‚   â€¢ CRITICAL: availability=0.8, latency=0.2, cost=0.0             â”‚  â”‚
â”‚   â”‚   â€¢ HIGH:     availability=0.6, latency=0.3, cost=0.1             â”‚  â”‚
â”‚   â”‚   â€¢ NORMAL:   availability=0.5, latency=0.3, cost=0.2             â”‚  â”‚
â”‚   â”‚   â€¢ LOW:      availability=0.3, latency=0.2, cost=0.5             â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Message Queue

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           MESSAGE QUEUE                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                     PRIORITY QUEUES                                 â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Processed first                            â”‚   â”‚
â”‚   â”‚   â”‚ CRITICAL        â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                           â”‚   â”‚
â”‚   â”‚   â”‚ [msg1][msg2]    â”‚                                              â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚   â”‚
â”‚   â”‚   â”‚ HIGH            â”‚                                              â”‚   â”‚
â”‚   â”‚   â”‚ [msg3][msg4]    â”‚                                              â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚   â”‚
â”‚   â”‚   â”‚ NORMAL          â”‚                                              â”‚   â”‚
â”‚   â”‚   â”‚ [msg5][msg6]... â”‚                                              â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Processed last                             â”‚   â”‚
â”‚   â”‚   â”‚ LOW / BULK      â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                            â”‚   â”‚
â”‚   â”‚   â”‚ [msg7][msg8]... â”‚                                              â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   Queue Behavior:                                                           â”‚
â”‚   â€¢ Messages persisted to disk (SQLite)                                    â”‚
â”‚   â€¢ Automatic retry with exponential backoff                               â”‚
â”‚   â€¢ Dead letter queue for failed messages                                  â”‚
â”‚   â€¢ TTL expiration for old messages                                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¥ Fleet Management

### Device State Machine

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DEVICE STATES                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚                    â”‚  UNREGISTERED â”‚                                        â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                            â”‚ register()                                     â”‚
â”‚                            â–¼                                                â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   OFFLINE     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚           â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚                              â”‚
â”‚           â”‚                â”‚ connect()      â”‚ disconnect()                 â”‚
â”‚           â”‚                â–¼                â”‚                              â”‚
â”‚           â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚                              â”‚
â”‚           â”‚    â”Œâ”€â”€â”€â”‚    ONLINE     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚           â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚           â”‚    â”‚           â”‚ sleep()                                       â”‚
â”‚           â”‚    â”‚           â–¼                                                â”‚
â”‚           â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚           â”‚    â””â”€â”€â”€â”‚   SLEEPING    â”‚                                        â”‚
â”‚           â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚           â”‚                â”‚ wake() / timeout                              â”‚
â”‚           â”‚                â–¼                                                â”‚
â”‚           â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”‚    LOST       â”‚                                        â”‚
â”‚     timeout > 24h  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                                                                              â”‚
â”‚   Status Indicators:                                                        â”‚
â”‚   ğŸŸ¢ ONLINE    - Active, responding                                        â”‚
â”‚   ğŸŸ¡ SLEEPING  - Low power, periodic check-in                              â”‚
â”‚   ğŸ”´ OFFLINE   - Not reachable                                             â”‚
â”‚   âš« LOST      - No contact for extended period                            â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Data Model

### Database Schema

```sql
-- Devices table
CREATE TABLE devices (
    id TEXT PRIMARY KEY,
    type TEXT NOT NULL,           -- momo, ghostbridge, mimic, swarm
    name TEXT,
    status TEXT DEFAULT 'offline',
    last_seen TIMESTAMP,
    last_location TEXT,           -- JSON: {"lat": x, "lon": y}
    battery INTEGER,
    channels TEXT,                -- JSON array
    metadata TEXT,                -- JSON
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Messages table
CREATE TABLE messages (
    id TEXT PRIMARY KEY,
    source TEXT NOT NULL,
    destination TEXT,
    channel TEXT,
    priority TEXT DEFAULT 'normal',
    type TEXT NOT NULL,
    data TEXT,                    -- JSON
    status TEXT DEFAULT 'pending',
    retries INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    sent_at TIMESTAMP,
    acked_at TIMESTAMP,
    FOREIGN KEY (source) REFERENCES devices(id)
);

-- Channels table
CREATE TABLE channels (
    name TEXT PRIMARY KEY,
    type TEXT NOT NULL,
    status TEXT DEFAULT 'down',
    config TEXT,                  -- JSON
    last_check TIMESTAMP,
    stats TEXT                    -- JSON: latency, bandwidth, etc
);

-- Alerts table
CREATE TABLE alerts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    device_id TEXT,
    type TEXT NOT NULL,
    severity TEXT DEFAULT 'info',
    message TEXT,
    acknowledged INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (device_id) REFERENCES devices(id)
);
```

---

## ğŸ” Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SECURITY LAYERS                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   1. Transport Encryption                                                   â”‚
â”‚      â””â”€â”€ LoRa: AES-256 (Meshtastic PSK)                                   â”‚
â”‚      â””â”€â”€ 4G: TLS 1.3                                                       â”‚
â”‚      â””â”€â”€ WiFi: WPA3                                                        â”‚
â”‚                                                                              â”‚
â”‚   2. Message Authentication                                                 â”‚
â”‚      â””â”€â”€ HMAC-SHA256 signature                                             â”‚
â”‚      â””â”€â”€ Timestamp validation (Â±5 min)                                     â”‚
â”‚      â””â”€â”€ Sequence numbers (replay protection)                              â”‚
â”‚                                                                              â”‚
â”‚   3. Device Authentication                                                  â”‚
â”‚      â””â”€â”€ Pre-shared device keys                                            â”‚
â”‚      â””â”€â”€ Challenge-response registration                                   â”‚
â”‚      â””â”€â”€ Device whitelist                                                  â”‚
â”‚                                                                              â”‚
â”‚   4. API Security                                                           â”‚
â”‚      â””â”€â”€ JWT tokens                                                        â”‚
â”‚      â””â”€â”€ Rate limiting                                                     â”‚
â”‚      â””â”€â”€ Input validation                                                  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ Web Dashboard Architecture

### Frontend Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DASHBOARD ARCHITECTURE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                        REACT APPLICATION                            â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚   â”‚                    PRESENTATION LAYER                      â”‚    â”‚   â”‚
â”‚   â”‚   â”‚                                                           â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   Pages:                                                  â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard (stats, fleet, activity)                 â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Fleet (device management)                          â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Captures (handshakes)                              â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Cracking (job queue)                               â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Phishing (evilginx sessions)                       â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Analytics (charts, reports)                        â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ Settings (config, theme)                           â”‚    â”‚   â”‚
â”‚   â”‚   â”‚                                                           â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   Components:                                             â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Layout (Sidebar, Header, MobileNav)                â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ UI (StatCard, DeviceCard, Toast, Modal, Skeleton)  â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ Maps (DeviceMap with Leaflet)                      â”‚    â”‚   â”‚
â”‚   â”‚   â”‚                                                           â”‚    â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â”‚                               â”‚                                     â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚   â”‚                    STATE & HOOKS                          â”‚    â”‚   â”‚
â”‚   â”‚   â”‚                                                           â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ useWebSocket (real-time connection)                â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ useApi (REST API calls)                            â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ useTheme (dark/light mode)                         â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ useKeyboardShortcuts (navigation)                  â”‚    â”‚   â”‚
â”‚   â”‚   â”‚                                                           â”‚    â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â”‚                               â”‚                                     â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚   â”‚   â”‚                    DATA LAYER                             â”‚    â”‚   â”‚
â”‚   â”‚   â”‚                                                           â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ API Client (fetch wrapper)                         â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ WebSocket Client (Socket.IO)                       â”‚    â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ Local Storage (theme, settings)                    â”‚    â”‚   â”‚
â”‚   â”‚   â”‚                                                           â”‚    â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tech Stack

| Layer | Technology | Purpose |
|-------|------------|---------|
| **Framework** | React 18 | UI components |
| **Language** | TypeScript | Type safety |
| **Build** | Vite | Fast bundling |
| **Styling** | Tailwind CSS | Utility-first CSS |
| **Icons** | Lucide React | SVG icons |
| **Charts** | Recharts | Data visualization |
| **Maps** | Leaflet + react-leaflet | Device locations |
| **Routing** | React Router v7 | Page navigation |
| **Notifications** | react-hot-toast | Toast alerts |

### File Structure

```
dashboard/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ nexus.svg              # Logo
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ layout/            # Sidebar, Header, MobileNav
â”‚   â”‚   â””â”€â”€ ui/                # Reusable components
â”‚   â”œâ”€â”€ hooks/                 # Custom React hooks
â”‚   â”œâ”€â”€ lib/                   # Utilities, export functions
â”‚   â”œâ”€â”€ pages/                 # Route components
â”‚   â”œâ”€â”€ types/                 # TypeScript definitions
â”‚   â”œâ”€â”€ App.tsx                # Root component
â”‚   â”œâ”€â”€ main.tsx               # Entry point
â”‚   â””â”€â”€ index.css              # Global styles
â”œâ”€â”€ package.json
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ vite.config.ts
â””â”€â”€ tsconfig.json
```

### API Integration

```typescript
// REST API endpoints (via FastAPI backend)
GET  /api/devices              # List all devices
GET  /api/devices/:id          # Get device details
POST /api/devices/:id/command  # Send command
GET  /api/handshakes           # List captures
GET  /api/jobs                 # Cracking jobs
GET  /api/sessions             # Phishing sessions
GET  /api/stats                # Dashboard statistics

// WebSocket events
ws://localhost:8080/ws
â”œâ”€â”€ handshake_captured         # New handshake
â”œâ”€â”€ password_cracked           # Crack complete
â”œâ”€â”€ device_status              # Online/offline
â”œâ”€â”€ alert                      # System alerts
â””â”€â”€ job_progress               # Crack progress
```

### Performance Optimizations

| Optimization | Implementation |
|--------------|----------------|
| **Code Splitting** | Lazy-loaded routes |
| **Chunk Separation** | vendor, charts, maps |
| **Lazy Components** | DeviceMap loaded on demand |
| **Skeleton Loading** | Placeholder UI during fetch |
| **Memoization** | React.memo for static components |

---

*MoMo-Nexus Architecture v1.1.0*

